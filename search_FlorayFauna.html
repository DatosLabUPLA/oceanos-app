<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Otras etiquetas del head permanecen igual -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>App Océano</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Roboto:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Work+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="assets/css/main.css" rel="stylesheet">
    <link href="assets/css/mobile.css" rel="stylesheet">
    
    <!-- ========================  ========================== -->

  </head>
  <body class="bodyone d-flex p-5">
    
    <!-- ======= Header ======= -->
    <header id="header" class="header d-flex align-items-center">
      <div class="container-sm d-flex align-items-center justify-content-between">
        <div >
          <a href="mobile.html" class="logo d-flex align-items-center">
            <!-- Uncomment the line below if you also wish to use an image logo -->
            <!-- <img src="assets/img/logo.png" alt=""> -->
            <h1>Litoral<span>Chileno</span></h1>
          </a>
        </div>
        <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
        <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>
        <nav id="navbar" class="navbar">
          <ul>
            <li><a href="index.html">Mi Perfil</a></li>
            <li><a href="search_FlorayFauna.html" class="active">Buscador de Flora y Fauna</a></li>
            <li><a href="#">Buscador con Ayuda</a></li>
            <li><a href="litoralSearch.html">Visita el Litoral</a></li>
            <li><a href="juego-educaplay.html">Desafios</a></li>
            <li><a href="#">Sube tu Registro</a></li>
            <li><a href="#">Contáctanos</a></li>
          </ul>
        </nav><!-- .navbar -->
      </div>
    </header><!-- End Header -->

    <!-- ======= FLora and Fauna Search ======= -->

    <!-- Sección de búsqueda de Flora y Fauna -->
    <section id="searchff" class="searchff">
      <div class="container">
        <!-- Resto del código permanece igual -->
        <div class="go">
          <div class="">
            <div class="row" >
              <h2> <span>Buscador de Flora y Fauna</span></h2>
            </div>
            
            <div>
              <div class="container-tabs">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="flora-tab-pane" aria-selected="true">Flora</button>
                  </li>
                  <li class="nav-item" role="presentation">
                      <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="fauna-tab-pane" aria-selected="false">Fauna</button>
                  </li>
                </ul>
                <div class="tab-content" id="myTabContent" >
        <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="flora-tab" tabindex="0">
          <div class="container" id="floraContainer">
            <!-- Contenido de flora se agregará aquí dinámicamente -->
          </div>
        </div>

        <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="fauna-tab" tabindex="0">
          <div class="container" id="faunaContainer">
            <!-- Contenido de fauna se agregará aquí dinámicamente -->
          </div>
        </div>

        <br>
        <div class="row">
          <div class="col-12 text text-center ">
            <a class="btn-started" href="search_FlorayFauna.html">
              <button class="search_FlorayFauna">Conoce Flora y Fauna</button>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Resto del código permanece igual -->

    <!-- Script para obtener datos de la API y mostrar en la interfaz -->
    <script>
document.addEventListener('DOMContentLoaded', function () {
  // URL de la API (reemplázala con la URL correcta)
  const apiUrl = 'https://oceanos-api.datoslab.cl';

  // Función para obtener datos de la API
  const fetchData = async (url) => {
    try {
      const response = await fetch(url);
      const data = await response.json();
      return data;
    } catch (error) {
      console.error('Error fetching data:', error);
    }
  };

  // Función para mostrar solo la primera imagen de la lista
  const getFirstImageUrl = (urlList) => {
    const imageUrls = urlList.split(',');
    return imageUrls[0].trim();
  };

  // Función para mostrar datos en la interfaz
  const renderData = (containerId, data) => {
    const container = document.getElementById(containerId);
    container.innerHTML = '';

    data.forEach(item => {
      const card = document.createElement('div');
      card.className = 'card sm-12 d-flex';

      // Agregar un enlace alrededor de cada tarjeta
      const link = document.createElement('a');
      link.href = `detalle.html?id=${item.ID}`; // Reemplaza 'ID' con el nombre real de la propiedad en tu API
      link.appendChild(card);

      const imageUrl = getFirstImageUrl(item.Url_Imagen);

      card.innerHTML = `
        <div class="row">
          <div class="col-sm-4">
            <img src="IMAGENES/${imageUrl}" class="img-fluid rounded-start w-auto" alt="...">
          </div>
          <div class="col-sm-8">
            <div class="card-body">
              <p class="card-text">${item.Nombre_Comun}</p>
              <p class="card-text"><small class="text-body-secondary">${item.Tipo}</small></p>
            </div>
          </div>
        </div>
      `;

      container.appendChild(link);
    });
  };

  // Obtener datos de flora y fauna y mostrar en la interfaz
  fetchData(apiUrl + '/flora')
    .then(data => renderData('floraContainer', data));

  fetchData(apiUrl + '/fauna')
    .then(data => renderData('faunaContainer', data));
});

    </script>
        <!-- Vendor JS Files -->
        <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="assets/vendor/aos/aos.js"></script>
        <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
        <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
        <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
        <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
        <script src="assets/vendor/php-email-form/validate.js"></script>
    
        <!-- Template Main JS File -->
        <script src="assets/js/main.js"></script>
  </body>
</html>
